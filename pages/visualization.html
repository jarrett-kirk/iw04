<!DOCTYPE html>
<html>
    <head>
        <link
            rel="stylesheet"
            type="text/css"
            href="{{ url_for('static', filename='stylesheets/main.css') }}"
        />
        <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    </head>
    <svg class="arrow-svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                <polygon points="0,0 5,5 0,10" fill="#EE4B2B" />
            </marker>
        </defs>
        <symbol id="arrow-right">
            <path d="M0,25 L50,25" fill="none" stroke="#EE4B2B" stroke-width="2" marker-end="url(#arrowhead)" />
        </symbol>
        <symbol id="arrow-up">
            <path d="M25,50 L25,0" fill="none" stroke="#EE4B2B" stroke-width="2" marker-end="url(#arrowhead)" />
        </symbol>
        <symbol id="arrow-up-bottom">
            <path d="M0,48 L50,48 M25,48 L25,0" fill="none" stroke="#EE4B2B" stroke-width="2" marker-end="url(#arrowhead)" />
        </symbol>
        <symbol id="line-bottom">
            <path d="M0,48 L50,48" fill="none" stroke="#EE4B2B" stroke-width="2" />
        </symbol>
        <symbol id="arrow-flowchart">
            <path d="M0,25 L25,25 L25,125 L50,125" fill="none" stroke="#EE4B2B" stroke-width="2" marker-end="url(#arrowhead)" />
        </symbol>
    </svg>
    {% include "./header.html" %}
    <div class="main-container">
        <h2>Visualizing a Galois LFSR</h2>
        <p>Welcome to the Visualization Page, where you can explore the inner workings of Linear Feedback Shift Registers (LFSRs) interactively. This page provides an engaging learning experience to help you understand how LFSRs generate sequences and how the bits evolve as you advance the state of the LFSR.</p>
        <div class="lfsr">

            <div class="column-container">
                <div class="small-container">
                    <svg class="arrow-svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2,50 L2,25 L50,25" fill="none" stroke="#EE4B2B" stroke-width="2" marker-end="url(#arrowhead)" />
                    </svg>
                </div>
                <div class="small-container">
                    <svg class="arrow-svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2,50 L2,0" fill="none" stroke="#EE4B2B" stroke-width="2" />
                    </svg>
                </div>
                <div class="small-container">
                    <svg class="arrow-svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2,50 L2,0" fill="none" stroke="#EE4B2B" stroke-width="2" />
                    </svg>
                </div>
                <div class="small-container">
                    <svg class="arrow-svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2,48 L50,48 M2,48 L2,0" fill="none" stroke="#EE4B2B" stroke-width="2" />
                    </svg>
                </div>
            </div>

            <div class="column-container">
                <div class="small-container">
                    <button class="bit-button" id="bit0" onclick="changeBit(0)"></button>
                </div>
                <div class="small-container"></div>
                <div class="small-container"></div>
                <div class="small-container">
                    <svg><use href="#line-bottom"/></svg>
                </div>
            </div>

            <div class="column-container" id="tap0-arrows0">
            </div>

            <div class="column-container">
                <div class="small-container">
                    <button class="bit-button" id="bit1" onclick="changeBit(1)"></button>
                </div>
                <div class="small-container" id="tap0-arrows1"></div>
                <div class="small-container">
                    <button class="tap-button" id="tap0" onclick="changeTap(0)"></button>
                </div>
                <div class="small-container" id="tap0-arrows2"></div>
            </div>

            <div class="column-container" id="tap1-arrows0">
            </div>

            <div class="column-container">
                <div class="small-container">
                    <button class="bit-button" id="bit2" onclick="changeBit(2)"></button>
                </div>
                <div class="small-container" id="tap1-arrows1"></div>
                <div class="small-container">
                    <button class="tap-button" id="tap1" onclick="changeTap(1)"></button>
                </div>
                <div class="small-container" id="tap1-arrows2"></div>
            </div>

            <div class="column-container" id="tap2-arrows0">
            </div>

            <div class="column-container">
                <div class="small-container">
                    <button class="bit-button" id="bit3" onclick="changeBit(3)"></button>
                </div>
                <div class="small-container" id="tap2-arrows1"></div>
                <div class="small-container">
                    <button class="tap-button" id="tap2" onclick="changeTap(2)"></button>
                </div>
                <div class="small-container" id="tap2-arrows2"></div>
            </div>

            <div class="column-container" id="tap3-arrows0">
            </div>

            <div class="column-container">
                <div class="small-container">
                    <button class="bit-button" id="bit4" onclick="changeBit(4)"></button>
                </div>
                <div class="small-container" id="tap3-arrows1"></div>
                <div class="small-container">
                    <button class="tap-button" id="tap3" onclick="changeTap(3)"></button>
                </div>
                <div class="small-container" id="tap3-arrows2"></div>
            </div>

            <div class="column-container" id="tap4-arrows0">
            </div>

            <div class="column-container">
                <div class="small-container">
                    <button class="bit-button" id="bit5" onclick="changeBit(5)"></button>
                </div>
                <div class="small-container" id="tap4-arrows1"></div>
                <div class="small-container">
                    <button class="tap-button" id="tap4" onclick="changeTap(4)"></button>
                </div>
                <div class="small-container" id="tap4-arrows2"></div>
            </div>

            <div class="column-container" id="tap5-arrows0">
            </div>

            <div class="column-container">
                <div class="small-container">
                    <button class="bit-button" id="bit6" onclick="changeBit(6)"></button>
                </div>
                <div class="small-container" id="tap5-arrows1"></div>
                <div class="small-container">
                    <button class="tap-button" id="tap5" onclick="changeTap(5)"></button>
                </div>
                <div class="small-container" id="tap5-arrows2"></div>
            </div>

            <div class="column-container" id="tap6-arrows0">
            </div>

            <div class="column-container">
                <div class="small-container">
                    <button class="bit-button" id="bit7" onclick="changeBit(7)"></button>
                </div>
                <div class="small-container" id="tap6-arrows1"></div>
                <div class="small-container">
                    <button class="tap-button" id="tap6" onclick="changeTap(6)"></button>
                </div>
                <div class="small-container" id="tap6-arrows2"></div>
            </div>

            <div class="column-container">
                <div class="small-container">
                    <svg class="arrow-svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0,25 L48,25 L48,50" fill="none" stroke="#EE4B2B" stroke-width="2" />
                    </svg>
                </div>
                <div class="small-container">
                    <svg class="arrow-svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                        <path d="M48,0 L48,50" fill="none" stroke="#EE4B2B" stroke-width="2" />
                    </svg>
                </div>
                <div class="small-container">
                    <svg class="arrow-svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                        <path d="M48,0 L48,50" fill="none" stroke="#EE4B2B" stroke-width="2" />
                    </svg>
                </div>
                <div class="small-container">
                    <svg class="arrow-svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                        <path d="M48,0 L48,48 M0,48 L48,48" fill="none" stroke="#EE4B2B" stroke-width="2" />
                    </svg>
                </div>
            </div>
        </div>
        <button class="next-button" onclick="step()">NEXT</button>
        <h2>Here is how to use the visualization above:</h2>
        <h4>Bit Manipulation: </h4>
        <p>Click on any bit within the LFSR to switch it between a 1 and a 0. This feature allows you to observe how changing individual bit values impacts the LFSR's sequence.</p>
        <h4>Taps Control: </h4>
        <p>Turn the taps on or off with a simple click. Taps play a crucial role in LFSRs by determining which bits participate in the XOR operation to generate the next bit. Activating or deactivating taps will show you their influence on the LFSR's behavior.</p>
        <h4>Advance State: </h4>
        <p>Click the "NEXT" button to advance the state of the LFSR. Watch as the bits shift to the right, and the next bit is calculated. Arrows will guide you through the process, indicating where and how the XOR operation occurs.</p>
        <h4>Understanding XOR Operation: </h4>
        <p>Follow the arrows to see if and where the current bit is XORed with other bits in the LFSR. This visual representation helps you grasp the concept of feedback and how it influences the output.</p>
    </div>
    <script src='./static/script/lfsr.js'></script>
</html>
